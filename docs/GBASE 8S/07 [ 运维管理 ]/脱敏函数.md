# 脱敏函数datamask  
示例，返回值按需处理  
```sql
DROP FUNCTION IF EXISTS datamask;
CREATE FUNCTION datamask(p_data varchar(128))
RETURNS varchar(128) WITH (NOT VARIANT);
  DEFINE v_length int;
  ON EXCEPTION
    RETURN NULL;
  END EXCEPTION;
  LET v_length = length(p_data);
  IF v_length > 12 THEN   -- id card
    RETURN LEFT(p_data,4) || '**********' || RIGHT(p_data,4);
  ELSE	                   -- phonenumber 
    RETURN LEFT(p_data,3) || '*****' || RIGHT(p_data,3);
  END IF;
END FUNCTION;
```
