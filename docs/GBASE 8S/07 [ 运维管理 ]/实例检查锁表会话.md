执行以下命令检查当前打开表或持有表上行锁或表锁的会话：（testdb为库名，t为表名，替换为实际值即可）
```
partnum=`oncheck -pt testdb:t |awk '/Partition/{printf "%x\n",$3;exit}'`&&onstat -g opn | awk -v partnum=$partnum '/rstcb/ { gsub(/0x/, "");rstcb=$2 } $0 ~ partnum {  print "onstat -u |awk \047/"rstcb"/ {print $3}\047"; }' |sh &&onstat -k | awk -v partnum=$partnum '$0 ~ partnum {print "onstat -u |grep "$3}' |uniq |sh |awk '{print $3}'
```
参考输出
```
126
121
131
86
131
105
```
以上命令输出所有持有表数据锁或打开表的会话id，使用onstat -g ses \<sid>可查看锁表会话，onmode -z  \<sid> 强制kill该会话。（注意，kill会话需要回滚该操作，可能需要一点时间后才能释放锁资源）