---
hide_title: false
sidebar_position: 15
---
页头结构
```
###################################################################################
保留页page0、1、10、11页头，最后8字节未使用
-----------------------------------------------------------------------------------
|---offset---|chunk-|cksum-|sts|psz|flags-|frptr-|frcnt-|--nxoffset--|----nxpgs---|
|---4Bytes---|--2B--|--2B--|-1B|-1B|--2B--|--2B--|--2B--|---4Bytes---|----4Bytes--|
-----------------------------------------------------------------------------------

保留页page2、3、4、5页头，nxoffset为扩展extent在chunk1中的偏移量，nxpgs为extent页数
|---offset---|chunk-|cksum-|sts|psz|flags-|frptr-|frcnt-|--nxoffset--|----nxpgs---|
|---4Bytes---|--2B--|--2B--|-1B|-1B|--2B--|--2B--|--2B--|---4Bytes---|----4Bytes--|
-----------------------------------------------------------------------------------

保留页page6、7、8、9页头，nxchk为扩展extent chunk号，nxoffset为偏移量，nxpgs为extent页数
-----------------------------------------------------------------------------------
|---offset---|chunk-|cksum-|sts|psz|flags-|frptr-|frcnt-|--nxoffset--|nxchk-|nxpgs|
|---4Bytes---|--2B--|--2B--|-1B|-1B|--2B--|--2B--|--2B--|---4Bytes---|--2B--|--2B-|
-----------------------------------------------------------------------------------
----------------------------------------------------------------------------------
###################################################################################
数据页页头最后8字节未使用
-----------------------------------------------------------------------------------
|---offset---|chunk-|cksum-|sts|psz|flags-|frptr-|frcnt-|--nxoffset--|----nxpgs---|
|---4Bytes---|--2B--|--2B--|-1B|-1B|--2B--|--2B--|--2B--|---4Bytes---|----4Bytes--|
-----------------------------------------------------------------------------------
索引页页头
-----------------------------------------------------------------------------------
|---offset---|chunk-|cksum-|sts|psz|flags-|frptr-|frcnt-|--nxoffset--|----nxpgs---|
|---4Bytes---|--2B--|--2B--|-1B|-1B|--2B--|--2B--|--2B--|---4Bytes---|----4Bytes--|
-----------------------------------------------------------------------------------
###################################################################################
Chunk Free List页头，该页头与索引页类似，每次增长一个页，next为下一页地址，prev为上一页地
址，该页只有一个slot，长度8字节，nslots区域记录的是该页包含Free Extent的数量(exs)
-----------------------------------------------------------------------------------
|---offset---|chunk-|cksum-|exs|psz|flags-|frptr-|frcnt-|----next----|----prev----|
|---4Bytes---|--2B--|--2B--|-1B|-1B|--2B--|--2B--|--2B--|---4Bytes---|----4Bytes--|
-----------------------------------------------------------------------------------
###################################################################################
```
psz说明（chunk pagesize）
```
十六进制   十进制   说明
0x0       0       2k默认空间页
0x8       8       4k空间页
0x10      16      6k
0x18      24      8k
0x20      32      10k 
0x28      40      12k 
0x30      48      14k
0x38      56      16k 
```
flags说明
```
Data page                        0x0001        B-tree twig node                 0x0040
Partition page                   0x0002        B-tree leaf node                 0x0080
Free-list (bitmap) page          0x0004        Logical log page                 0x0100
Chunk free-list page             0x0008        Last page of logical log         0x0200
Remainder page                   0x0009        Sync page of logical log         0x0400
Partition-resident blobpage      0x000b        Page in big chunk format         0x0800
Blobspace-resident blobpage      0x000c        Root reserved page               0x1000
Blob chunk free-list bitmap page 0x000d        Flag values used only in shared memory:
Blob chunk blob map page         0x000e        No physical logging required     0x2000
B-tree node page                 0x0010        Page altered in-place            0x4000
B-tree root node                 0x0020        B-tree leaf with deleted entries 0x8000
```