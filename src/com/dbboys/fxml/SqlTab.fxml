<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import com.dbboys.customnode.CustomLabelTextField?>
<?import javafx.collections.FXCollections?>
<?import com.dbboys.customnode.CustomSqlEditCodeArea?>
<?import org.fxmisc.flowless.VirtualizedScrollPane?>
<?import com.dbboys.customnode.CustomInfoStackPane?>
<?import com.dbboys.customnode.CustomUserTextField?>
<?import org.controlsfx.control.tableview2.TableView2?>
<?import com.dbboys.customnode.CustomResultsetTableView?>
<VBox fx:id="sqlTab" fx:controller="com.dbboys.ctrl.SqlTabController" xmlns="http://javafx.com/javafx/8.0.31" xmlns:fx="http://javafx.com/fxml/1">
    <HBox alignment="CENTER_LEFT" style="-fx-border-color: #aaa;-fx-border-width: 0.2 0 0.2 0">
        <Button fx:id="sqlRunButton" styleClass="custom-button" focusTraversable="false">
            <tooltip>
                <Tooltip />
            </tooltip>
        </Button>
        <Button fx:id="sqlExplainButton" styleClass="custom-button" focusTraversable="false">
            <tooltip>
                <Tooltip />
            </tooltip>
        </Button>
        <Button fx:id="sqlStopButton" styleClass="custom-button" focusTraversable="false">
            <tooltip>
                <Tooltip />
            </tooltip>
        </Button>
        <Region prefWidth="50"></Region>
        <StackPane fx:id="sqlConnectChoiceBoxIconStackPane"/>
        <ChoiceBox fx:id="sqlConnectChoiceBox" styleClass="custom-connectname-choicebox" focusTraversable="false">
        </ChoiceBox>
        <StackPane fx:id="sqlDbIconPane"/>
        <ChoiceBox fx:id="sqlDbChoiceBox"  styleClass="custom-dbname-choicebox" focusTraversable="false">
        </ChoiceBox>
        <StackPane fx:id="sqlUserIconPane"/>
        <CustomLabelTextField fx:id="sqlUserTextField" focusTraversable="false" style="-fx-padding: 0 0 0 5">
        </CustomLabelTextField>
        <ChoiceBox fx:id="sqlSqlModeChoiceBox" styleClass="custom-sqlmode-choicebox" focusTraversable="false">
        </ChoiceBox>
        <Region HBox.hgrow="ALWAYS"></Region>
        
        <StackPane>
            <HBox alignment="CENTER_RIGHT">
                <Label fx:id="sqlReadOnlyLabel" visible="false"/>
            </HBox>
            <HBox>
                <ChoiceBox fx:id="sqlCommitModeChoiceBox"  styleClass="custom-commitmode-choicebox" focusTraversable="false">
                </ChoiceBox>
                <Button fx:id="sqlRecordButton" styleClass="custom-button" focusTraversable="false">
                    <tooltip>
                        <Tooltip />
                    </tooltip>
                </Button>
            </HBox>
        </StackPane>
    </HBox>
    <SplitPane fx:id="sqlSplitPane" prefHeight="30000" style="-fx-background-color: none" orientation="VERTICAL">
        <Pane fx:id="topPane">
            <StackPane fx:id="sqlEditStackPane" alignment="BOTTOM_LEFT">
                <VirtualizedScrollPane fx:id="sqlEditScrollPane">
                    <content>
                    <CustomSqlEditCodeArea fx:id="sqlEditCodeArea">
                    </CustomSqlEditCodeArea>
                    </content>
                </VirtualizedScrollPane>
                <HBox fx:id="transactionBox" maxHeight="15" maxWidth="160" alignment="CENTER_LEFT" visible="false">
                    <!--
                    <Button fx:id="trans_warning_button"  focusTraversable="false" style="-fx-background-color: none;-fx-border-color: none" visible="false">
                        <graphic>
                            <Group>
                                <SVGPath content="M10.8906 3.0859 Q11.6562 2.6641 12.5156 2.8828 Q13.3906 3.0859 13.875 3.8047 L21.75 17.9609 Q21.9844 18.4922 22 19.0703 Q22.0312 19.6484 21.7344 20.1641 Q21.4531 20.6641 20.9688 20.9766 Q20.5 21.2734 19.9219 21.3359 L4.2188 21.3359 Q3.6406 21.3359 3.1406 21.0547 Q2.6406 20.7578 2.3281 20.2734 Q2.0156 19.7891 1.9844 19.2266 Q1.9688 18.6484 2.2031 18.1172 L10.0312 3.9453 Q10.3125 3.3828 10.8906 3.0859 ZM12 16.2891 Q11.4219 16.2891 11.1094 16.7891 Q10.7969 17.2891 11.1094 17.8047 Q11.4219 18.3047 12 18.3047 Q12.3906 18.3047 12.6719 18.0234 Q12.9531 17.7266 12.9531 17.3203 Q12.9531 16.9141 12.6719 16.6328 Q12.3906 16.3359 12 16.2891 ZM12 8.3203 Q11.6094 8.3203 11.3281 8.5703 Q11.0469 8.8047 10.9844 9.1797 L10.9844 14.4141 Q11.0469 14.8047 11.3281 15.0703 Q11.6094 15.3359 12 15.3359 Q12.3906 15.3359 12.6719 15.0703 Q12.9531 14.8047 13.0156 14.4141 L13.0156 9.1797 Q12.9531 8.8047 12.6719 8.5703 Q12.3906 8.3203 12 8.3203 Z" fill="#ff0000" scaleX="0.6" scaleY="0.6"/>
                            </Group>
                        </graphic>
                    </Button>
                    -->
                    <Button fx:id="transactionCommitButton"  focusTraversable="false" styleClass="commit-btn">
                    </Button>
                    <Label text=" "></Label>
                    <Button fx:id="transactionRollbackButton"  focusTraversable="false" styleClass="commit-btn">
                    </Button>
                </HBox>
            </StackPane>
        </Pane>
        <!--Pane用于避免拖动被元素阻挡 -->
        <Pane fx:id="bottomPane">
            <StackPane fx:id="bottomPaneStackPane">
                <TabPane fx:id="resultsetTabPane" tabClosingPolicy="ALL_TABS">
                    <Tab fx:id="resultsetSummaryTab" closable="false" style="-fx-pref-height: 18;">
                        <StackPane fx:id="resultsetStackPane">
                            <CustomResultsetTableView fx:id="resultsetTotalTableView" style="-fx-background-color: white">
                            </CustomResultsetTableView>
                        </StackPane>

                    </Tab>
                </TabPane>
                <!--<HBox>外层需加一层stackpane，防止HBox设置不可见时导致下层tableview列宽拖动会被卡顿-->
                <StackPane fx:id="sqlExecuteProcessStackPane" maxWidth="300" maxHeight="50" alignment="CENTER" visible="false">
                    <HBox alignment="CENTER" spacing="3">
                        <Label fx:id="sqlExecuteLoadingLabel" />
                        <Label fx:id="sqlExecuteTaskInfo"></Label>
                        <Label fx:id="sqlExecuteTimeInfo"></Label>
                    </HBox>
                </StackPane>
            </StackPane>
        </Pane>
    </SplitPane>
</VBox>
